kind: serving
metadata:
  name: rnn-serving-function
  tag: ''
  hash: f191999b05836f17282d18fabe9be18a1ee08cbe
  project: default
spec:
  command: ''
  args: []
  image: ''
  entry_points:
    load:
      name: load
      doc: load and initialize the model and/or other elements
      parameters:
      - name: self
        default: ''
      outputs:
      - default: ''
      lineno: 13
    predict:
      name: predict
      doc: Generate model predictions from sample
      parameters:
      - name: self
        default: ''
      - name: body
        type: dict
        default: ''
      outputs:
      - default: ''
        type: list
      lineno: 18
    init_context:
      name: init_context
      doc: ''
      parameters:
      - name: context
        default: ''
      outputs:
      - default: ''
      lineno: 27
    handler:
      name: handler
      doc: ''
      parameters:
      - name: context
        default: ''
      - name: event
        default: ''
      outputs:
      - default: ''
      lineno: 30
  description: ''
  min_replicas: 1
  max_replicas: 4
  env: []
  base_spec:
    apiVersion: nuclio.io/v1
    kind: Function
    metadata:
      annotations:
        nuclio.io/generated_by: function generated from /User/test2/functions/rnn_stock_prediction_serving/stock-prediction-model-serving.ipynb
      labels: {}
      name: rnn-serving-function
    spec:
      build:
        baseImage: mlrun/mlrun
        commands:
        - python -m pip install tensorflow
        - python -m pip install keras
        functionSourceCode: IyBHZW5lcmF0ZWQgYnkgbnVjbGlvLmV4cG9ydC5OdWNsaW9FeHBvcnRlcgoKaW1wb3J0IG9zCmltcG9ydCBtbHJ1bgppbXBvcnQgbnVtcHkgYXMgbnAKaW1wb3J0IGtlcmFzCmltcG9ydCBqc29uCmltcG9ydCByZXF1ZXN0cwppbXBvcnQgd2FybmluZ3MgCndhcm5pbmdzLmZpbHRlcndhcm5pbmdzKCdpZ25vcmUnKQoKY2xhc3MgUk5OX01vZGVsX1NlcnZpbmcobWxydW4uc2VydmluZy5WMk1vZGVsU2VydmVyKToKICAgIGRlZiBsb2FkKHNlbGYpOgogICAgICAgICIiImxvYWQgYW5kIGluaXRpYWxpemUgdGhlIG1vZGVsIGFuZC9vciBvdGhlciBlbGVtZW50cyIiIgogICAgICAgIG1vZGVsX2ZpbGUsZXh0cmFfZGF0YSA9IHNlbGYuZ2V0X21vZGVsKHN1ZmZpeCA9ICIuaDUiKQogICAgICAgIHNlbGYubW9kZWwgPSBrZXJhcy5tb2RlbHMubG9hZF9tb2RlbChtb2RlbF9maWxlKQoKICAgIGRlZiBwcmVkaWN0KHNlbGYsIGJvZHk6IGRpY3QpIC0+IGxpc3Q6CiAgICAgICAgIiIiR2VuZXJhdGUgbW9kZWwgcHJlZGljdGlvbnMgZnJvbSBzYW1wbGUiIiIKICAgICAgICBmZWF0cyA9IG5wLmFzYXJyYXkoYm9keVsnaW5wdXRzJ10pCiAgICAgICAgcmVzdWx0ID0gc2VsZi5tb2RlbC5wcmVkaWN0KGZlYXRzKQogICAgICAgIHJlc3VsdCA9IGpzb24uZHVtcHMocmVzdWx0LnRvbGlzdCgpKQogICAgICAgIHJldHVybiByZXN1bHQKCgpmcm9tIG1scnVuLnJ1bnRpbWVzIGltcG9ydCBudWNsaW9faW5pdF9ob29rCmRlZiBpbml0X2NvbnRleHQoY29udGV4dCk6CiAgICBudWNsaW9faW5pdF9ob29rKGNvbnRleHQsIGdsb2JhbHMoKSwgJ3NlcnZpbmdfdjInKQoKZGVmIGhhbmRsZXIoY29udGV4dCwgZXZlbnQpOgogICAgcmV0dXJuIGNvbnRleHQubWxydW5faGFuZGxlcihjb250ZXh0LCBldmVudCkK
        noBaseImagesPull: true
      env:
      - name: MODEL_CLASS
        value: '"RNN_Model_Serving"'
      handler: stock-prediction-model-serving:handler
      runtime: python:3.6
      volumes: []
  source: ''
  function_kind: serving_v2
  build:
    commands: []
    code_origin: https://github.com/daniels290813/functions.git#856b0a65b0a041cfa6b5ee4ef52ffa90f334ada8:RNN_serving_function.ipynb
  secret_sources: []
  affinity: null
verbose: false
