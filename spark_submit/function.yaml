kind: job
metadata:
  name: submit
  tag: ''
  hash: 1b6327cd4c7785dfcf32e51a28b8b75cb81d06f8
  project: ''
  categories: []
spec:
  command: ''
  args: []
  image: aviaigz/mlrun
  env:
  - name: V3IO_API
    value: ''
  - name: V3IO_USERNAME
    value: ''
  - name: V3IO_ACCESS_KEY
    value: ''
  default_handler: handler
  entry_points:
    handler:
      name: handler
      doc: ''
      parameters:
      - name: context
      - name: v3io_access_key
      - name: name
      - name: class_param
      - name: jars
      - name: packages
      - name: spark_options
      outputs: []
      lineno: 8
    spark_command_builder:
      name: spark_command_builder
      doc: ''
      parameters:
      - name: name
      - name: class_param
      - name: jars
      - name: packages
      - name: spark_options
      outputs: []
      lineno: 15
  description: ''
  service_account: mlrun-api
  build:
    functionSourceCode: IyBHZW5lcmF0ZWQgYnkgbnVjbGlvLmV4cG9ydC5OdWNsaW9FeHBvcnRlcgoKZnJvbSBtbHJ1biBpbXBvcnQgZ2V0X29yX2NyZWF0ZV9jdHgKZnJvbSBrdWJlcm5ldGVzIGltcG9ydCBjb25maWcsIGNsaWVudApmcm9tIGt1YmVybmV0ZXMuc3RyZWFtIGltcG9ydCBzdHJlYW0KZnJvbSBtbHJ1bi5rOHNfdXRpbHMgaW1wb3J0IGdldF9rOHNfaGVscGVyCgpkZWYgaGFuZGxlcihjb250ZXh0LHYzaW9fYWNjZXNzX2tleSxuYW1lPU5vbmUsY2xhc3NfcGFyYW09Tm9uZSxqYXJzPU5vbmUscGFja2FnZXM9Tm9uZSxzcGFya19vcHRpb25zPScnKTogICAgICAgICAgICAKICAgIGNtZCA9IHNwYXJrX2NvbW1hbmRfYnVpbGRlcihuYW1lLGNsYXNzX3BhcmFtLGphcnMscGFja2FnZXMsc3Bhcmtfb3B0aW9ucykKICAgIGNvbnRleHQubG9nZ2VyLmluZm8oInN1Ym1pdGluZyA6IiArIGNtZCkKICAgIGNsaSA9IGdldF9rOHNfaGVscGVyKCkKICAgIGNsaS5leGVjX3NoZWxsX2NtZChjbWQsIHYzaW9fYWNjZXNzX2tleSkKICAgIAogICAgCmRlZiBzcGFya19jb21tYW5kX2J1aWxkZXIobmFtZSxjbGFzc19wYXJhbSxqYXJzLHBhY2thZ2VzLHNwYXJrX29wdGlvbnMpOgogICAgY21kID0gJ3NwYXJrLXN1Ym1pdCcgCiAgICBpZiBuYW1lIGlzIG5vdCBOb25lOgogICAgICAgIGNtZCArPSAnIC0tbmFtZSAnICsgbmFtZSAKICAgIAogICAgaWYgY2xhc3NfcGFyYW0gaXMgbm90IE5vbmU6CiAgICAgICAgY21kICs9ICcgLS1jbGFzcyAnICsgY2xhc3NfcGFyYW0gCiAgICAgICAgCiAgICBpZiBqYXJzIGlzIG5vdCBOb25lOgogICAgICAgIGNtZCArPSAnIC0tamFycyAnICsgamFycwogICAgICAgICAgICAKICAgIGlmIHBhY2thZ2VzIGlzIG5vdCBOb25lOgogICAgICAgIGNtZCArPSAnIC0tcGFja2FnZXMgJyArIHBhY2thZ2VzCgogICAgaWYgc3Bhcmtfb3B0aW9ucyBpcyBub3QgTm9uZToKICAgICAgICBjbWQgKz0gJyAnICsgc3Bhcmtfb3B0aW9ucyAgICAKICAgIAogICAgcmV0dXJuIGNtZCAgICAKCg==
    commands: []
    code_origin: https://github.com/aviaIguazio/functions.git#d0974c36c6bb292e03de73e693de616cd3a2d879:submit.ipynb
